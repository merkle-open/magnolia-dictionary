class: info.magnolia.ui.contentapp.configuration.ContentAppDescriptor
appClass: info.magnolia.ui.framework.app.BaseApp

datasource: &dictionaryDatasource
  $type: jcrDatasource
  workspace: dictionary
  allowedNodeTypes:
    - mgnl:label

subApps:
  browser:
    class: info.magnolia.ui.contentapp.configuration.BrowserDescriptor
    actions:
      exportLabels:
        icon: icon-export
        class: com.merkle.oss.magnolia.dictionary.actions.importexport.XlsExportAction$Definition
        availability:
          multiple: true
          root: true
          nodeTypes:
            - mgnl:label
      importLabels:
        icon: icon-import
        $type: openDialogAction
        dialogId: magnolia-dictionary:import/importXlsDialog
        availability:
          root: true
          writePermissionRequired: true
      editLabel:
        icon: icon-edit
        $type: openDetailSubappAction
        appName: dictionary
        subAppName: detail
        viewType: edit
        availability:
          writePermissionRequired: true
          nodeTypes:
            - mgnl:label
      publish:
        icon: icon-publish
        $type: jcrCommandAction
        command: publish
        asynchronous: true
        params:
          recursive: true
        availability:
          root: true
          writePermissionRequired: true
          rules:
            notDeleted: &notDeleted
              $type: jcrIsDeletedRule
              negate: true
            isPublishable:
              $type: jcrPublishableRule
              name: isPublishable
      unpublish:
        icon: icon-unpublish
        $type: jcrCommandAction
        command: unpublish
        availability:
          root: true
          writePermissionRequired: true
          rules:
            notDeleted: *notDeleted
            isPublished:
              $type: jcrPublishedRule
              name: isPublished
      deleteAllExpired:
        icon: icon-delete
        class: com.merkle.oss.magnolia.dictionary.actions.delete.DeleteAllExpiredLabels$Definition
        availability:
          root: true
          writePermissionRequired: true
      deleteExpired:
        icon: icon-delete
        class: com.merkle.oss.magnolia.dictionary.actions.delete.DeleteExpiredLabel$Definition
        availability:
          writePermissionRequired: true
          multiple: true
    actionbar:
      defaultAction: editLabel
      sections:
        - name: label
          groups:
            - name: editActions
              items:
                - name: editLabel
                - name: deleteExpired
            - name: importexport
              items:
                - name: exportLabels
            - name: publishActions
              items:
                - name: publish
                - name: unpublish
          availability:
            nodeTypes:
              - mgnl:label
        - name: root
          groups:
            - name: importexport
              items:
                - name: exportLabels
                - name: importLabels
            - name: dictionary
              items:
                - name: publish
                - name: deleteAllExpired
          availability:
            root: true

    workbench:
      contentViews:
        - name: tree
          multiSelect: true
          $type: treeView
          rowStyleGenerator: info.magnolia.ui.contentapp.row.StatusRowStyleGenerator
          columns: &treeColumns
            jcrName:
              $type: titleColumn
              editable: false
            value:
              $type: componentColumn
              editable: false
            multi:
              class: info.magnolia.ui.contentapp.configuration.column.ConfiguredColumnDefinition
              valueProvider: com.merkle.oss.magnolia.dictionary.workbench.column.MultiColumnValueProvider
              editable: false
            expired:
              class: info.magnolia.ui.contentapp.configuration.column.ConfiguredColumnDefinition
              valueProvider: com.merkle.oss.magnolia.dictionary.workbench.column.ExpiredColumnValueProvider
              editable: false
            jcrPublishingStatus:
              $type: jcrStatusColumn
              width: 130
            mgnl:lastModified:
              $type: dateColumn
              editable: false
              width: 200
        - name: list
          $type: listView
          multiSelect: true
          columns: *treeColumns

  detail:
    class: info.magnolia.ui.contentapp.detail.DetailDescriptor
    itemProvider:
      $type: jcrNodeFromLocationProvider
      nodeType: mgnl:label
    datasource:
      <<: *dictionaryDatasource
      describeByProperty: jcrName
    form:
      properties:
        name:
          $type: textField
          readOnly: true
        value:
          $type: textField
          readOnly: true
        multi:
          class: com.merkle.oss.magnolia.dictionary.field.MultiTextFieldDefinition
